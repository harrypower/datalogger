<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Some svg stuff</title>
</head>
<$
require ../collection/sqlite3-stuff.fs
require ../collection/makesvg.fs
decimal

list$: somedata
s" 30" somedata-$!
s" 40" somedata-$!
s" 25" somedata-$!
s" 50" somedata-$!
s" 35" somedata-$!
s" 100" somedata-$!
s" -20" somedata-$!
s" 0" somedata-$!
s" -100" somedata-$!

$>
<body>
<$
somedata makesvgchart type
." fdepth is: " fdepth .
setupsqlite3
s"  " dbrecordseparator 
s" " dbfieldseparator
64000 mkretbuff
list$: dataholder
: getstuff 
\ s" select temperature from mbedA where (row(id) > ( select max(rowid) from mbedA - 100 ));"  dbcmds
s" select nh3raw from mbedA;" dbcmds
    sendsqlite3cmd . ."   db errors "
    dbret$
begin
  32 $split
  2swap dataholder-$!
  dup 0 = 
until
2drop
;
getstuff
dataholder swap drop .
dataholder makesvgchart type
mymin . ."  " mymax . ."  " 
dataholder 2drop 
: looksee ( ncount -- )
    0 do
	dataholder-$@ type ." :" 
    loop ;
   
 s" mbedA" get-table>fields throw 
 field$s-$@ type ."  "
 field$s-$@ type ."  " 
 field$s-$@ type ."  "
 field$s-$@ type ."  "
 field$s-$@ type ."  "
 field$s-$@ type ."  "
 field$s-$@ type ."  "
 field$s-$@ type ."  "
." depth is: " depth .
." fdepth is: " fdepth .
\ xmaxpoints looksee
pathdata$-$off
s" M 10.3 30.8" pathdata$-$!
s" L 15.8 35.7" pathdata$-$!
s" L 97 80.8" pathdata$-$!
s" L 83 9.372" pathdata$-$!
init-svg-header
svg-attr#1
make-a-pathsvg type

somedata-$off
s" 30.8" somedata-$!
s" 35.7" somedata-$!
s" 80.8" somedata-$!
s" 9.372" somedata-$!
somedata makesvgchart type
." depth is: " depth .
." fdepth is: " fdepth .

somedata-$off
s" .308" somedata-$!
s" .357" somedata-$!
s" .808" somedata-$!
s" .9372" somedata-$!
somedata makesvgchart type

$>

</body>
</html>
